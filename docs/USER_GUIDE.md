# 消息聚合器 - 用户使用指南

## 目录

1. [快速开始](#快速开始)
2. [登录与注册](#登录与注册)
3. [添加平台账户](#添加平台账户)
4. [选择监听频道](#选择监听频道)
5. [查看消息](#查看消息)
6. [设置过滤规则](#设置过滤规则)
7. [应用设置](#应用设置)
8. [常见问题](#常见问题)

---

## 快速开始

欢迎使用消息聚合器！这是一款帮助您统一管理多个群组软件消息的桌面应用。通过本应用，您可以在一个界面中查看来自Discord、Telegram、Reddit等多个平台的消息，并通过关键词过滤快速找到重要信息。

### 系统要求

- **Windows**: Windows 10或更高版本
- **macOS**: macOS 10.13或更高版本
- **Linux**: 支持AppImage的现代Linux发行版

### 安装步骤

请参考README.md中的安装说明，根据您的操作系统下载并安装对应版本。

---

## 登录与注册

### 首次使用

1. 启动应用后，您会看到登录页面
2. 有两种登录方式可选:
   - **邮箱登录**: 输入邮箱地址和密码
   - **快捷登录**: 使用Google或GitHub账户登录

### 邮箱登录

如果您选择邮箱登录:

1. 在"邮箱地址"框中输入您的邮箱
2. 在"密码"框中输入密码
3. 点击"登录/注册"按钮

**注意**: 如果是首次使用该邮箱，系统会自动为您创建账户。

### Google登录

1. 点击"使用Google账户登录"按钮
2. 在弹出的浏览器窗口中完成Google授权
3. 授权成功后自动返回应用

---

## 添加平台账户

登录成功后，您需要添加要监控的平台账户。

### 进入账户管理

1. 点击左侧菜单中的"账户管理"
2. 点击右上角的"添加账户"按钮

### 添加Discord账户

Discord需要您提供用户Token:

1. 在"选择平台"下拉框中选择"Discord"
2. 在"账户名称"中输入一个便于识别的名称(如"我的Discord")
3. 获取Token的方法:
   - 打开Discord网页版(https://discord.com/app)
   - 按F12打开开发者工具
   - 切换到"Console"标签
   - 复制并执行以下代码:
     ```javascript
     (webpackChunkdiscord_app.push([[''],{},e=>{m=[];for(let c in e.c)m.push(e.c[c])}]),m).find(m=>m?.exports?.default?.getToken!==void 0).exports.default.getToken()
     ```
   - 复制返回的Token(以"mfa."或其他前缀开头的长字符串)
4. 将Token粘贴到"登录凭证"文本框中
5. 点击"添加"按钮

**安全提示**: Token相当于您的账户密码，请妥善保管。建议使用小号进行监控。

### 添加Telegram账户

Telegram需要您申请API凭证:

1. 访问 https://my.telegram.org
2. 使用手机号登录
3. 点击"API development tools"
4. 填写应用信息(随意填写即可)
5. 获得API ID和API Hash
6. 在应用中选择"Telegram"平台
7. 在"登录凭证"中按以下格式填写:
   ```json
   {
     "api_id": "你的API_ID",
     "api_hash": "你的API_Hash",
     "phone": "+86手机号"
   }
   ```
8. 点击"添加"按钮
9. 首次使用会收到验证码，按提示输入

### 添加Reddit账户

Reddit需要您的登录Cookie:

1. 在浏览器中登录Reddit(https://reddit.com)
2. 按F12打开开发者工具
3. 切换到"Application"(Chrome)或"Storage"(Firefox)标签
4. 找到"Cookies" > "https://reddit.com"
5. 复制所有Cookie(建议使用EditThisCookie等扩展导出)
6. 在应用中选择"Reddit"平台
7. 将Cookie粘贴到"登录凭证"文本框
8. 点击"添加"按钮

### 添加其他平台

微信、QQ、Slack等平台的接入方法请参考技术文档或联系开发团队。

---

## 选择监听频道

添加平台账户后，系统会自动拉取您已加入的频道列表。

### 查看频道列表

1. 在"账户管理"页面，找到已添加的账户
2. 点击账户卡片，展开频道列表
3. 您会看到该平台下所有已加入的频道/群组

### 开启监听

1. 勾选要监听的频道
2. 系统会立即开始抓取该频道的消息
3. 新消息会实时显示在主界面

### 停止监听

1. 取消勾选不需要监听的频道
2. 系统会停止抓取该频道的消息
3. 历史消息仍会保留

---

## 查看消息

消息聚合器提供三种视图模式，满足不同使用场景。

### 时间线视图

这是默认视图，按时间倒序显示所有消息。

**功能特点**:
- 显示消息的完整内容
- 显示发送者、平台、频道、时间等信息
- 官方消息和置顶消息有特殊标记
- 支持搜索和平台筛选

**使用方法**:
1. 点击左侧菜单"时间线视图"
2. 在顶部搜索框输入关键词搜索
3. 使用平台下拉框筛选特定平台的消息
4. 点击消息中的"查看原消息"链接跳转到原平台

### 分类卡片视图

按平台分组显示消息统计和最新消息。

**功能特点**:
- 显示每个平台的消息数量
- 显示每个平台最新的5条消息
- 提供消息数量统计

**使用方法**:
1. 点击左侧菜单"分类卡片"
2. 查看各平台的消息卡片
3. 点击卡片可查看该平台的详细消息

### 仪表盘视图

专注于高优先级和重要消息。

**功能特点**:
- 只显示高优先级消息(评分≥40)
- 单独展示官方消息
- 显示消息的优先级评分

**使用方法**:
1. 点击左侧菜单"仪表盘"
2. 查看高优先级消息列表
3. 关注带有火焰图标的紧急消息

---

## 设置过滤规则

通过设置关键词规则，您可以自动高亮或过滤特定消息。

### 添加关键词规则

1. 点击顶部的"过滤规则"按钮
2. 点击"添加规则"
3. 填写规则信息:
   - **关键词**: 要匹配的文本(如"空投"、"白名单")
   - **规则类型**: 选择高亮/过滤/通知
   - **优先级**: 1-100，数值越高优先级越高
   - **正则表达式**: 如果需要使用正则匹配，勾选此项
   - **适用平台**: 选择规则适用的平台(可多选)
   - **适用频道**: 选择规则适用的频道(可多选)
4. 点击"保存"

### 规则类型说明

- **高亮规则**: 包含关键词的消息会被高亮显示(根据优先级显示不同颜色)
- **过滤规则**: 只显示包含关键词的消息，其他消息隐藏
- **通知规则**: 包含关键词的消息会触发桌面通知

### 优先级评分机制

系统会自动为每条消息计算优先级分数:

- 基础分: 10分
- 官方账号发送: +50分
- 置顶消息: +30分
- 包含高优先级关键词: +20分
- 包含中优先级关键词: +10分
- 包含链接: +5分
- 包含图片/视频: +5分

**分数对应的显示效果**:
- 60分以上: 红色高亮
- 40-59分: 黄色高亮
- 20-39分: 普通显示
- 20分以下: 灰色显示(可选择隐藏)

### 管理规则

1. 在"过滤规则"页面查看所有已创建的规则
2. 点击"编辑"修改规则
3. 点击"删除"移除规则
4. 可以临时禁用规则而不删除

---

## 应用设置

### 进入设置页面

点击左侧菜单"设置"进入应用设置。

### 外观设置

- **主题模式**: 选择浅色/深色/跟随系统
- **语言**: 选择简体中文或English

### 行为设置

- **开机自启动**: 开启后，应用会在系统启动时自动运行
- **最小化到系统托盘**: 关闭窗口时最小化到托盘而不是退出
- **启用桌面通知**: 收到重要消息时显示桌面通知
- **启用提示音**: 通知时播放提示音

### 数据管理

- **消息保留天数**: 设置消息在本地保留的天数(1-365天)
- 超过保留期的消息会被自动删除以节省空间

### 保存设置

修改设置后，点击"保存设置"按钮使更改生效。

---

## 常见问题

### Q1: 为什么添加账户后看不到消息?

**A**: 请检查以下几点:
1. 确认已在"账户管理"中勾选要监听的频道
2. 确认提供的登录凭证(Token/Cookie)是否正确且未过期
3. 查看应用日志是否有错误提示
4. 尝试删除账户后重新添加

### Q2: Token/Cookie过期了怎么办?

**A**: 
1. 进入"账户管理"
2. 删除过期的账户
3. 按照添加账户的步骤重新获取Token/Cookie
4. 重新添加账户

### Q3: 会不会导致账户被封禁?

**A**: 
- 本应用模拟正常用户行为访问平台
- 但仍存在被检测的风险
- **强烈建议使用小号进行监控**
- 不要频繁切换IP或进行异常操作
- 遵守各平台的使用条款

### Q4: 数据存储在哪里?

**A**: 
- 所有数据存储在本地计算机
- Windows: `C:\Users\用户名\AppData\Roaming\message-aggregator`
- macOS: `~/Library/Application Support/message-aggregator`
- Linux: `~/.config/message-aggregator`
- 数据库文件: `message-aggregator.db`

### Q5: 如何备份数据?

**A**: 
1. 关闭应用
2. 复制上述数据目录中的`message-aggregator.db`文件
3. 保存到安全位置
4. 恢复时将备份文件覆盖回原位置

### Q6: 消息抓取不及时怎么办?

**A**: 
- 检查网络连接是否正常
- 某些平台有频率限制，可能存在延迟
- 尝试重启应用
- 查看是否有平台协议更新导致抓取失败

### Q7: 如何卸载应用?

**A**: 
- **Windows**: 控制面板 > 程序和功能 > 卸载
- **macOS**: 将应用拖入废纸篓
- **Linux**: 删除AppImage文件
- 如需清理数据，手动删除上述数据目录

### Q8: 支持移动端吗?

**A**: 
- 当前版本仅支持桌面端(Windows/macOS/Linux)
- 移动端支持在开发计划中，敬请期待

### Q9: 如何报告Bug或提出建议?

**A**: 
- 访问GitHub仓库提交Issue
- 发送邮件至 support@messageaggregator.com
- 加入Discord社区讨论

### Q10: 这个应用是免费的吗?

**A**: 
- 是的，本应用完全免费且开源
- 采用MIT许可证
- 您可以自由使用、修改和分发
- 欢迎贡献代码或提供反馈

---

## 获取帮助

如果您在使用过程中遇到问题，可以通过以下方式获取帮助:

- 📖 查看[完整文档](https://github.com/your-username/message-aggregator/wiki)
- 💬 加入[Discord社区](https://discord.gg/your-invite)
- 📧 发送邮件至 support@messageaggregator.com
- 🐛 在[GitHub Issues](https://github.com/your-username/message-aggregator/issues)提交问题

---

**感谢使用消息聚合器！祝您使用愉快！** 🎉
